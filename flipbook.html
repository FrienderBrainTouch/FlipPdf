<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PDF í”Œë¦½ë¶</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            overflow-x: hidden;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        /* í—¤ë” ìŠ¤íƒ€ì¼ */
        .header {
            text-align: center;
            margin-bottom: 30px;
        }

        .header h1 {
            color: white;
            font-size: 2.5rem;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .book-selector {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 30px;
        }

        .book-btn {
            padding: 12px 24px;
            font-size: 1.1rem;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            background: white;
            color: #333;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

        .book-btn.active {
            background: #4CAF50;
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(76, 175, 80, 0.4);
        }

        .book-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.3);
        }

        /* ê¸°ëŠ¥ ë²„íŠ¼ë“¤ */
        .function-buttons {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 30px;
        }

        .function-btn {
            padding: 10px 20px;
            border: none;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: 500;
        }

        .print-btn {
            background: #2196F3;
            color: white;
        }

        .download-btn {
            background: #4CAF50;
            color: white;
        }

        .function-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
        }

        /* í”Œë¦½ë¶ ì»¨í…Œì´ë„ˆ */
        .flipbook-container {
            display: flex;
            justify-content: center;
            align-items: center;
            perspective: 1000px;
            margin: 0 auto;
        }

        .book {
            position: relative;
            width: 370px;
            height: 500px;
            transform-style: preserve-3d;
            transition: transform 0.5s;
        }

        .book.mobile {
            width: 320px;
            height: 450px;
        }

        /* í˜ì´ì§€ ìŠ¤íƒ€ì¼ */
        .page {
            position: absolute;
            width: 100%;
            height: 100%;
            transform-origin: left center;
            transition: all 0.8s cubic-bezier(0.645, 0.045, 0.355, 1);
            border-radius: 5px;
            box-shadow: 0 0 20px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        .page.flipped {
            transform: rotateY(-180deg);
        }

        /* í˜ì´ì§€ ìœ„ì¹˜ ì¡°ì • */
        .page:nth-child(odd) {
            left: 0;
        }

        .page:nth-child(even) {
            left: 0;
        }

        /* í˜ì´ì§€ ë„˜ê¹€ íš¨ê³¼ ê°œì„  */
        .page.right-page {
            transform: translateX(50%);
        }

        .page.left-page {
            transform: translateX(-50%);
        }

        .page-content {
            width: 100%;
            height: 100%;
            position: relative;
            background: white;
        }

        .page-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        /* ì¸í„°ë™í‹°ë¸Œ ì´ë¯¸ì§€ */
        .interactive-image {
            position: absolute;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
            border-radius: 8px;
        }

        .interactive-image:hover {
            border-color: #2196F3;
            transform: scale(1.05);
        }

        .interactive-image img {
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .interactive-image:hover img {
            opacity: 1;
        }

        .interactive-image video {
            opacity: 1;
        }

        /* í‘œì§€ í˜ì´ì§€ ì• ë‹ˆë©”ì´ì…˜ */
        .cover-page {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            color: white;
            text-align: center;
        }

        .cover-background {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.3s ease-out, filter 0.3s ease-out;
        }

        .cover-main-image {
            width: 320px;
            height: 320px;
            object-fit: contain;
            margin-bottom: 20px;
            transition: all 0.3s ease;
            z-index: 2;
            position: relative;
        }

        .cover-title {
            font-size: 2rem;
            font-weight: bold;
            margin-bottom: 10px;
            z-index: 2;
            position: relative;
        }

        .cover-subtitle {
            font-size: 1.2rem;
            opacity: 0.9;
            z-index: 2;
            position: relative;
        }

        /* ë„¤ë¹„ê²Œì´ì…˜ */
        .navigation {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 30px;
        }

        .nav-btn {
            padding: 10px 20px;
            border: none;
            border-radius: 20px;
            cursor: pointer;
            background: white;
            color: #333;
            transition: all 0.3s ease;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
        }

        .nav-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
        }

        .nav-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        /* ëª¨ë‹¬ */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.8);
            backdrop-filter: blur(5px);
        }

        .modal-content {
            background-color: white;
            margin: 5% auto;
            padding: 20px;
            border-radius: 15px;
            width: 90%;
            max-width: 800px;
            max-height: 80vh;
            overflow: auto;
            position: relative;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }

        .close {
            position: absolute;
            right: 15px;
            top: 15px;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            color: #666;
            transition: color 0.3s ease;
        }

        .close:hover {
            color: #000;
        }

        .modal-media {
            width: 100%;
            height: auto;
            border-radius: 10px;
        }

        /* ë°˜ì‘í˜• ë””ìì¸ */
        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }

            .header h1 {
                font-size: 2rem;
            }

            .book-selector {
                flex-direction: column;
                align-items: center;
            }

            .function-buttons {
                flex-wrap: wrap;
                justify-content: center;
            }

            .book {
                width: 320px;
                height: 450px;
            }

            .cover-main-image {
                width: 250px;
                height: 250px;
            }

            .cover-title {
                font-size: 1.5rem;
            }

            .cover-subtitle {
                font-size: 1rem;
            }

            /* ëª¨ë°”ì¼ì—ì„œ ì¸í„°ë™í‹°ë¸Œ ì´ë¯¸ì§€ í¬ê¸° ì¡°ì • */
            .interactive-image {
                transform: scale(0.9);
            }

            .interactive-image img,
            .interactive-image video {
                max-width: 80% !important;
            }
        }

        /* íƒœë¸”ë¦¿ ë°˜ì‘í˜• */
        @media (min-width: 769px) and (max-width: 1024px) {
            .book {
                width: 350px;
                height: 480px;
            }

            .interactive-image {
                transform: scale(0.95);
            }
        }

        /* ëŒ€í˜• í™”ë©´ ë°˜ì‘í˜• */
        @media (min-width: 1025px) {
            .book {
                width: 370px;
                height: 500px;
            }
        }

        /* ë¡œë”© ì• ë‹ˆë©”ì´ì…˜ */
        .loading {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 200px;
        }

        .spinner {
            width: 50px;
            height: 50px;
            border: 5px solid #f3f3f3;
            border-top: 5px solid #3498db;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* í˜ì´ì§€ ë„˜ê¹€ íš¨ê³¼ */
        .page-shadow {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(to right, rgba(0,0,0,0.1), transparent);
            pointer-events: none;
            z-index: 1;
        }

        .page.flipped .page-shadow {
            background: linear-gradient(to left, rgba(0,0,0,0.1), transparent);
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- í—¤ë” -->
        <div class="header">
            
            <!-- ì±… ì„ íƒ ë²„íŠ¼ -->
            <div class="book-selector">
                <button class="book-btn active" id="friender-btn" data-book="friender">Friender í”„ë¡œì íŠ¸</button>
                <button class="book-btn" id="vq-btn" data-book="vq">VQ í”„ë¡œì íŠ¸</button>
            </div>

            <!-- ê¸°ëŠ¥ ë²„íŠ¼ë“¤ -->
            <div class="function-buttons">
                <button class="function-btn print-btn" id="print-btn">
                    ğŸ–¨ï¸ í”„ë¦°íŠ¸
                </button>
                <button class="function-btn download-btn" id="download-btn">
                    ğŸ“¥ PDF ë‹¤ìš´ë¡œë“œ
                </button>
            </div>
        </div>

        <!-- í”Œë¦½ë¶ ì»¨í…Œì´ë„ˆ -->
        <div class="flipbook-container">
            <div class="book" id="book">
                <!-- í˜ì´ì§€ë“¤ì´ JavaScriptë¡œ ë™ì  ìƒì„±ë©ë‹ˆë‹¤ -->
            </div>
        </div>

        <!-- ë„¤ë¹„ê²Œì´ì…˜ -->
        <div class="navigation">
            <button class="nav-btn" id="prevBtn">â—€ ì´ì „</button>
            <span id="pageInfo" style="color: white; font-weight: bold; padding: 10px 20px;">1 / 8</span>
            <button class="nav-btn" id="nextBtn">ë‹¤ìŒ â–¶</button>
        </div>
    </div>

    <!-- ëª¨ë‹¬ -->
    <div class="modal" id="modal">
        <div class="modal-content">
            <span class="close" id="closeModal">&times;</span>
            <div id="modalContent"></div>
        </div>
    </div>

    <script>
        // ì „ì—­ ë³€ìˆ˜
        let currentBook = 'friender';
        let currentPage = 0;
        let totalPages = 8;
        let bookData = {};
        let isMobile = window.innerWidth < 768;

        // Friender í™˜ê²½ ê´€ë ¨ GIF ë§¤í•‘
        const frienderGifMapping = {
            1: './public/interacivefile/FrienderFile/1-íƒ„ì†Œ-ì¤‘ë¦½ì„-í†µí•´-ì§€êµ¬ì´Œ-ê¸°í›„ë³€í™”ë¥¼-ì˜ˆë°©.gif',
            2: './public/interacivefile/FrienderFile/2-ì¹œí™˜ê²½-ì—ë„ˆì§€-ìë¦½ë§ˆì„-ë§Œë“¤ê¸°.gif',
            3: './public/interacivefile/FrienderFile/3-íƒ„ì†Œ-ì¤‘ë¦½-ì‹¤ì²œ.gif',
            4: './public/interacivefile/FrienderFile/4-ë˜‘ë˜‘í•œ-ì¬í™œìš©-ì“°ë ˆê¸°-ë¶„ë¦¬ë°°ì¶œ-ì‹¤ì²œ.gif',
            5: './public/interacivefile/FrienderFile/5-ì—ë„ˆì§€ê°€-ê°€ì •ì—-ì˜¤ê¸°ê¹Œì§€ì˜-ì—¬ì •.gif',
            6: './public/interacivefile/FrienderFile/6-í•´ì–‘-ì˜¤ì—¼-êµ¬ì¡°-íƒì‚¬ëŒ€-ì²´í—˜.gif'
        };

        // ì±… ë°ì´í„° ì •ì˜
        const frienderData = {
            name: 'Friender í”„ë¡œì íŠ¸',
            totalPages: 8,
            pdfPath: './public/func-file/FrienderFile/í”„ëœë”-ì†Œê°œ-ì±…ì.pdf',
            pages: [
                {
                    id: 'cover',
                    image: './public/Pdf-img/Friender/1.jpg',
                    isCover: true,
                    interactiveElements: []
                },
                {
                    id: 1,
                    image: './public/Pdf-img/Friender/2.jpg',
                    interactiveElements: [
                        {
                            type: 'image',
                            src: './public/interacivefile/FrienderFile/section-img/2-1.png',
                            position: { top: '3%', left: '5%', width: '100%', maxWidth: '345px' },
                            clickAction: 'modal'
                        },
                        {
                            type: 'image',
                            src: './public/interacivefile/FrienderFile/section-img/2-2.png',
                            position: { top: '25%', left: '3%', width: '100%', maxWidth: '340px' },
                            clickAction: 'modal'
                        },
                        {
                            type: 'image',
                            src: './public/interacivefile/FrienderFile/section-img/2-3.png',
                            position: { bottom: '0%', right: '0%', width: '100%', maxWidth: '355px' },
                            clickAction: 'modal'
                        }
                    ]
                },
                {
                    id: 2,
                    image: './public/Pdf-img/Friender/3.jpg',
                    interactiveElements: [
                        {
                            type: 'image',
                            src: './public/interacivefile/FrienderFile/section-img/3-1.png',
                            position: { top: '7%', left: '2%', width: '100%', maxWidth: '353px' },
                            clickAction: 'modal'
                        },
                        {
                            type: 'image',
                            src: './public/interacivefile/FrienderFile/section-img/3-2.png',
                            position: { top: '38%', right: '2%', width: '100%', maxWidth: '354px' },
                            clickAction: 'modal'
                        },
                        {
                            type: 'image',
                            src: './public/interacivefile/FrienderFile/section-img/3-3.png',
                            position: { bottom: '0%', left: '3%', width: '100%', maxWidth: '351px' },
                            clickAction: 'modal'
                        }
                    ]
                },
                {
                    id: 3,
                    image: './public/Pdf-img/Friender/4.jpg',
                    interactiveElements: [
                        {
                            type: 'image',
                            src: './public/interacivefile/FrienderFile/section-img/4-1.png',
                            position: { top: '0%', left: '7%', width: '100%', maxWidth: '340px' },
                            clickAction: 'modal'
                        },
                        {
                            type: 'image',
                            src: './public/interacivefile/FrienderFile/section-img/4-2.png',
                            position: { top: '22%', right: '2%', width: '100%', maxWidth: '340px' },
                            clickAction: 'modal'
                        },
                        {
                            type: 'image',
                            src: './public/interacivefile/FrienderFile/section-img/4-3.png',
                            position: { bottom: '39%', left: '7%', width: '100%', maxWidth: '340px' },
                            clickAction: 'modal'
                        },
                        {
                            type: 'image',
                            src: './public/interacivefile/FrienderFile/section-img/4-4.png',
                            position: { bottom: '3%', right: '0%', width: '100%', maxWidth: '340px' },
                            clickAction: 'modal'
                        },
                        // í™˜ê²½ ê´€ë ¨ ì´ë¯¸ì§€ë“¤ ì¶”ê°€ (Reactì™€ ë™ì¼í•œ ìœ„ì¹˜)
                        {
                            type: 'image',
                            src: './public/interacivefile/FrienderFile/environ-1.png',
                            position: { top: '12%', left: '9%', width: '50px', maxWidth: '50px' },
                            clickAction: 'modal'
                        },
                        {
                            type: 'image',
                            src: './public/interacivefile/FrienderFile/environ-2.png',
                            position: { top: '12%', left: '23.5%', width: '50px', maxWidth: '50px' },
                            clickAction: 'modal'
                        },
                        {
                            type: 'image',
                            src: './public/interacivefile/FrienderFile/environ-3.png',
                            position: { top: '12%', left: '38%', width: '50px', maxWidth: '50px' },
                            clickAction: 'modal'
                        },
                        {
                            type: 'image',
                            src: './public/interacivefile/FrienderFile/environ-4.png',
                            position: { top: '12%', left: '52%', width: '50px', maxWidth: '50px' },
                            clickAction: 'modal'
                        },
                        {
                            type: 'image',
                            src: './public/interacivefile/FrienderFile/environ-5.png',
                            position: { top: '12%', left: '67%', width: '50px', maxWidth: '50px' },
                            clickAction: 'modal'
                        },
                        {
                            type: 'image',
                            src: './public/interacivefile/FrienderFile/environ-6.png',
                            position: { top: '12%', left: '81%', width: '50px', maxWidth: '50px' },
                            clickAction: 'modal'
                        }
                    ]
                },
                {
                    id: 4,
                    image: './public/Pdf-img/Friender/5.jpg',
                    interactiveElements: [
                        {
                            type: 'image',
                            src: './public/interacivefile/FrienderFile/section-img/5-1.png',
                            position: { top: '0%', left: '0%', width: '100%', maxWidth: '340px' },
                            clickAction: 'modal'
                        },
                        {
                            type: 'image',
                            src: './public/interacivefile/FrienderFile/section-img/5-2.png',
                            position: { top: '33%', left: '0%', width: '100%', maxWidth: '340px' },
                            clickAction: 'modal'
                        },
                        {
                            type: 'image',
                            src: './public/interacivefile/FrienderFile/section-img/5-3.png',
                            position: { bottom: '3%', right: '10%', width: '100%', maxWidth: '340px' },
                            clickAction: 'modal'
                        },
                        // ë¹„ë””ì˜¤ ì¶”ê°€ (Reactì™€ ë™ì¼í•œ ìœ„ì¹˜)
                        {
                            type: 'video',
                            src: './public/interacivefile/FrienderFile/BlockCoding-VR.mp4',
                            position: { top: '6%', left: '22%', width: '200px', maxWidth: '157px' },
                            clickAction: 'modal'
                        }
                    ]
                },
                {
                    id: 5,
                    image: './public/Pdf-img/Friender/6.jpg',
                    interactiveElements: [
                        {
                            type: 'image',
                            src: './public/interacivefile/FrienderFile/section-img/6-1.png',
                            position: { top: '0%', left: '9%', width: '100%', maxWidth: '305px' },
                            clickAction: 'modal'
                        },
                        {
                            type: 'image',
                            src: './public/interacivefile/FrienderFile/section-img/6-2.png',
                            position: { top: '12%', left: '6%', width: '100%', maxWidth: '340px' },
                            clickAction: 'modal'
                        },
                        {
                            type: 'image',
                            src: './public/interacivefile/FrienderFile/section-img/6-3.png',
                            position: { bottom: '27%', right: '0%', width: '100%', maxWidth: '340px' },
                            clickAction: 'modal'
                        },
                        {
                            type: 'image',
                            src: './public/interacivefile/FrienderFile/section-img/6-4.png',
                            position: { bottom: '3%', left: '7%', width: '100%', maxWidth: '340px' },
                            clickAction: 'modal'
                        }
                    ]
                },
                {
                    id: 6,
                    image: './public/Pdf-img/Friender/7.jpg',
                    interactiveElements: [
                        {
                            type: 'image',
                            src: './public/interacivefile/FrienderFile/section-img/7-1.png',
                            position: { top: '0%', left: '0%', width: '100%', maxWidth: '340px' },
                            clickAction: 'modal'
                        },
                        {
                            type: 'image',
                            src: './public/interacivefile/FrienderFile/section-img/7-2.png',
                            position: { top: '11%', right: '8%', width: '100%', maxWidth: '340px' },
                            clickAction: 'modal'
                        },
                        {
                            type: 'image',
                            src: './public/interacivefile/FrienderFile/section-img/7-3.png',
                            position: { bottom: '39%', left: '0%', width: '100%', maxWidth: '340px' },
                            clickAction: 'modal'
                        },
                        {
                            type: 'image',
                            src: './public/interacivefile/FrienderFile/section-img/7-4.png',
                            position: { bottom: '4%', right: '7%', width: '100%', maxWidth: '340px' },
                            clickAction: 'modal'
                        }
                    ]
                },
                {
                    id: 'last',
                    image: './public/Pdf-img/Friender/8.jpg',
                    isLast: true,
                    interactiveElements: [
                        {
                            type: 'image',
                            src: './public/interacivefile/FrienderFile/section-img/8-1.png',
                            position: { bottom: '1%', left: '0%', width: '100%', maxWidth: '340px' },
                            clickAction: 'modal'
                        }
                    ]
                }
            ]
        };

        const vqData = {
            name: 'VQ í”„ë¡œì íŠ¸',
            totalPages: 24,
            pdfPath: './public/func-file/VQFile/(ì£¼)ë¸Œì´íìŠ¤íŠœë””ì˜¤_ì†Œê°œ ì¹´ë‹¬ë¡œê·¸.pdf',
            pages: [
                {
                    id: 'cover',
                    image: './public/Pdf-img/VQ/1.png',
                    isCover: true,
                    interactiveElements: []
                }
                // VQ í˜ì´ì§€ë“¤ì€ ë™ì ìœ¼ë¡œ ìƒì„± (24í˜ì´ì§€)
            ]
        };

        // VQ í˜ì´ì§€ ë°ì´í„° ë™ì  ìƒì„±
        for (let i = 2; i <= 23; i++) {
            vqData.pages.push({
                id: i - 1,  // 1ë¶€í„° ì‹œì‘
                image: `./public/Pdf-img/VQ/${i}.png`,
                interactiveElements: []
            });
        }
        
        // ë§ˆì§€ë§‰ í˜ì´ì§€ ì¶”ê°€
        vqData.pages.push({
            id: 'last',
            image: './public/Pdf-img/VQ/24.png',
            isLast: true,
            interactiveElements: []
        });

        // íŠ¹ë³„í•œ VQ í˜ì´ì§€ë“¤ì— ì¸í„°ë™í‹°ë¸Œ ìš”ì†Œ ì¶”ê°€ (Reactì™€ ë™ì¼í•œ ìœ„ì¹˜)
        vqData.pages[1].interactiveElements = [
            {
                type: 'image',
                src: './public/interacivefile/VQFile/sectionimg/2-1.png',
                position: { top: '17%', left: '9%', width: '100%', maxWidth: '300px' },
                clickAction: 'modal'
            },
            {
                type: 'image',
                src: './public/interacivefile/VQFile/sectionimg/2-2.png',
                position: { top: '48%', left: '8%', width: '100%', maxWidth: '320px' },
                clickAction: 'modal'
            },
            {
                type: 'image',
                src: './public/interacivefile/VQFile/sectionimg/2-3.png',
                position: { bottom: '8%', left: '9%', width: '100%', maxWidth: '320px' },
                clickAction: 'modal'
            }
        ];

        vqData.pages[2].interactiveElements = [
            {
                type: 'image',
                src: './public/interacivefile/VQFile/sectionimg/3-1.png',
                position: { top: '17%', left: '4%', width: '100%', maxWidth: '310px' },
                clickAction: 'modal'
            },
            {
                type: 'image',
                src: './public/interacivefile/VQFile/sectionimg/3-2.png',
                position: { bottom: '4%', right: '12%', width: '100%', maxWidth: '310px' },
                clickAction: 'modal'
            }
        ];

        // ì¶”ê°€ VQ í˜ì´ì§€ë“¤ì— ì¸í„°ë™í‹°ë¸Œ ìš”ì†Œ ì¶”ê°€ (Reactì™€ ë™ì¼í•œ ìœ„ì¹˜)
        vqData.pages[3].interactiveElements = [
            {
                type: 'image',
                src: './public/interacivefile/VQFile/sectionimg/4-1.png',
                position: { top: '9%', left: '8%', width: '100%', maxWidth: '300px' },
                clickAction: 'modal'
            }
        ];

        vqData.pages[4].interactiveElements = [
            {
                type: 'image',
                src: './public/interacivefile/VQFile/sectionimg/5-1.png',
                position: { bottom: '6%', right: '7%', width: '100%', maxWidth: '180px' },
                clickAction: 'modal'
            }
        ];

        vqData.pages[5].interactiveElements = [
            {
                type: 'image',
                src: './public/interacivefile/VQFile/sectionimg/6-1.png',
                position: { top: '19%', left: '25%', width: '100%', maxWidth: '190px' },
                clickAction: 'modal'
            }
        ];

        vqData.pages[6].interactiveElements = [
            {
                type: 'image',
                src: './public/interacivefile/VQFile/sectionimg/7-1.png',
                position: { top: '19%', left: '9%', width: '100%', maxWidth: '300px' },
                clickAction: 'modal'
            }
        ];

        vqData.pages[7].interactiveElements = [
            {
                type: 'image',
                src: './public/interacivefile/VQFile/sectionimg/8-1.png',
                position: { top: '20%', left: '25%', width: '100%', maxWidth: '190px' },
                clickAction: 'modal'
            }
        ];

        vqData.pages[8].interactiveElements = [
            {
                type: 'image',
                src: './public/interacivefile/VQFile/sectionimg/9-1.png',
                position: { top: '19%', left: '16%', width: '100%', maxWidth: '245px' },
                clickAction: 'modal'
            }
        ];

        vqData.pages[9].interactiveElements = [
            {
                type: 'image',
                src: './public/interacivefile/VQFile/sectionimg/10-1.png',
                position: { top: '20%', left: '25%', width: '100%', maxWidth: '190px' },
                clickAction: 'modal'
            }
        ];

        vqData.pages[10].interactiveElements = [
            {
                type: 'image',
                src: './public/interacivefile/VQFile/sectionimg/11-1.png',
                position: { top: '17%', left: '24%', width: '100%', maxWidth: '184px' },
                clickAction: 'modal'
            }
        ];

        vqData.pages[11].interactiveElements = [
            {
                type: 'image',
                src: './public/interacivefile/VQFile/sectionimg/12-1.png',
                position: { top: '20%', left: '24%', width: '100%', maxWidth: '195px' },
                clickAction: 'modal'
            }
        ];

        vqData.pages[12].interactiveElements = [
            {
                type: 'image',
                src: './public/interacivefile/VQFile/sectionimg/13-1.png',
                position: { top: '11%', left: '0%', width: '100%', maxWidth: '292px' },
                clickAction: 'modal'
            }
        ];

        vqData.pages[13].interactiveElements = [
            {
                type: 'image',
                src: './public/interacivefile/VQFile/sectionimg/14-1.png',
                position: { top: '20%', left: '25%', width: '100%', maxWidth: '190px' },
                clickAction: 'modal'
            }
        ];

        vqData.pages[14].interactiveElements = [
            {
                type: 'image',
                src: './public/interacivefile/VQFile/sectionimg/15-1.png',
                position: { top: '30%', left: '14%', width: '100%', maxWidth: '268px' },
                clickAction: 'modal'
            }
        ];

        vqData.pages[15].interactiveElements = [
            {
                type: 'image',
                src: './public/interacivefile/VQFile/sectionimg/16-1.png',
                position: { top: '20%', left: '25%', width: '100%', maxWidth: '190px' },
                clickAction: 'modal'
            }
        ];

        vqData.pages[16].interactiveElements = [
            {
                type: 'image',
                src: './public/interacivefile/VQFile/sectionimg/17-1.png',
                position: { top: '8%', left: '0%', width: '100%', maxWidth: '288px' },
                clickAction: 'modal'
            }
        ];

        vqData.pages[17].interactiveElements = [
            {
                type: 'image',
                src: './public/interacivefile/VQFile/sectionimg/18-1.png',
                position: { top: '10%', left: '9%', width: '100%', maxWidth: '298px' },
                clickAction: 'modal'
            }
        ];

        // 19í˜ì´ì§€ì— ë¹„ë””ì˜¤ ì¶”ê°€ (Reactì™€ ë™ì¼í•œ ìœ„ì¹˜)
        vqData.pages[18].interactiveElements = [
            {
                type: 'video',
                src: './public/interacivefile/VQFile/19-1-video.mp4',
                position: { top: '10%', left: '25%', width: '175px', maxWidth: '175px' },
                clickAction: 'modal'
            }
        ];

        vqData.pages[19].interactiveElements = [
            {
                type: 'image',
                src: './public/interacivefile/VQFile/sectionimg/20-1.png',
                position: { top: '9%', left: '9%', width: '100%', maxWidth: '308px' },
                clickAction: 'modal'
            }
        ];

        vqData.pages[20].interactiveElements = [
            {
                type: 'image',
                src: './public/interacivefile/VQFile/sectionimg/21-1.png',
                position: { top: '9%', left: '12%', width: '100%', maxWidth: '264px' },
                clickAction: 'modal'
            }
        ];

        vqData.pages[21].interactiveElements = [
            {
                type: 'image',
                src: './public/interacivefile/VQFile/sectionimg/22-1.png',
                position: { top: '27%', left: '13%', width: '100%', maxWidth: '284px' },
                clickAction: 'modal'
            }
        ];

        vqData.pages[22].interactiveElements = [
            {
                type: 'image',
                src: './public/interacivefile/VQFile/sectionimg/23-1.png',
                position: { top: '35%', left: '31%', width: '100%', maxWidth: '134px' },
                clickAction: 'modal'
            }
        ];

        // ì´ˆê¸°í™”
        function init() {
            bookData = frienderData;
            totalPages = bookData.totalPages;
            currentPage = 0;
            renderBook();
            updateNavigation();
            startCoverAnimation();
            setupEventListeners();
        }

        // ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì„¤ì •
        function setupEventListeners() {
            // ì±… ì„ íƒ ë²„íŠ¼ë“¤
            document.getElementById('friender-btn').addEventListener('click', function() {
                switchBook('friender');
            });
            
            document.getElementById('vq-btn').addEventListener('click', function() {
                switchBook('vq');
            });

            // ê¸°ëŠ¥ ë²„íŠ¼ë“¤
            document.getElementById('print-btn').addEventListener('click', printPDF);
            document.getElementById('download-btn').addEventListener('click', downloadPDF);

            // ë„¤ë¹„ê²Œì´ì…˜ ë²„íŠ¼ë“¤
            document.getElementById('prevBtn').addEventListener('click', previousPage);
            document.getElementById('nextBtn').addEventListener('click', nextPage);

            // ëª¨ë‹¬ ë‹«ê¸°
            document.getElementById('closeModal').addEventListener('click', closeModal);

            // ëª¨ë‹¬ ì™¸ë¶€ í´ë¦­ ì‹œ ë‹«ê¸°
            document.getElementById('modal').addEventListener('click', function(e) {
                if (e.target === this) {
                    closeModal();
                }
            });

            // í‚¤ë³´ë“œ ì´ë²¤íŠ¸
            document.addEventListener('keydown', function(e) {
                if (e.key === 'ArrowLeft') {
                    previousPage();
                } else if (e.key === 'ArrowRight') {
                    nextPage();
                }
            });

            // ìœˆë„ìš° ë¦¬ì‚¬ì´ì¦ˆ
            window.addEventListener('resize', function() {
                const wasMobile = isMobile;
                isMobile = window.innerWidth < 768;
                
                if (wasMobile !== isMobile) {
                    renderBook();
                }
            });

            // í˜ì´ì§€ ì–¸ë¡œë“œ ì‹œ ì• ë‹ˆë©”ì´ì…˜ ì •ë¦¬
            window.addEventListener('beforeunload', cleanupAnimation);
        }

        // ì±… ë Œë”ë§
        function renderBook() {
            const bookElement = document.getElementById('book');
            bookElement.innerHTML = '';

            // ëª¨ë°”ì¼ ì²´í¬
            if (isMobile) {
                bookElement.classList.add('mobile');
            } else {
                bookElement.classList.remove('mobile');
            }

            bookData.pages.forEach((page, index) => {
                const pageElement = createPageElement(page, index);
                bookElement.appendChild(pageElement);
            });

            // ì´ˆê¸° í˜ì´ì§€ ìƒíƒœ ì„¤ì • - ì»¤ë²„ í˜ì´ì§€ë§Œ ë³´ì´ê²Œ
            if (currentPage === 0) {
                for (let i = 0; i < totalPages; i++) {
                    const pageElement = document.getElementById(`page-${i}`);
                    if (pageElement) {
                        if (i === 0) {
                            // ì²« í˜ì´ì§€(ì»¤ë²„)ë§Œ ë³´ì´ê²Œ
                            pageElement.style.display = 'block';
                            pageElement.style.transform = 'translateX(0)';
                            pageElement.classList.add('left-page');
                        } else {
                            // ë‚˜ë¨¸ì§€ í˜ì´ì§€ëŠ” ìˆ¨ê¸°ê¸°
                            pageElement.style.display = 'none';
                        }
                    }
                }
            }
        }

        // í˜ì´ì§€ ìš”ì†Œ ìƒì„±
        function createPageElement(page, index) {
            const pageDiv = document.createElement('div');
            pageDiv.className = 'page';
            pageDiv.id = `page-${index}`;
            pageDiv.style.zIndex = totalPages - index;

            const pageContent = document.createElement('div');
            pageContent.className = 'page-content';

            if (page.isCover) {
                // í‘œì§€ í˜ì´ì§€
                pageContent.className += ' cover-page';
                if (bookData.name === 'Friender í”„ë¡œì íŠ¸') {
                    const coverBackground = document.createElement('img');
                    coverBackground.src = page.image;
                    coverBackground.alt = 'Cover';
                    coverBackground.className = 'cover-background';
                    pageContent.appendChild(coverBackground);

                    const overlayDiv = document.createElement('div');
                    overlayDiv.className = 'absolute inset-0 flex items-center justify-center';
                    
                    const mainImage = document.createElement('img');
                    mainImage.src = './public/interacivefile/FrienderFile/main.png';
                    mainImage.alt = 'Main';
                    mainImage.className = 'cover-main-image';
                    mainImage.id = 'cover-main-image';
                    mainImage.style.cssText = 'width: 1px; height: 1px; opacity: 0; transform: rotate(0deg); object-fit: contain; transition: transform 0.1s linear;';
                    overlayDiv.appendChild(mainImage);
                    pageContent.appendChild(overlayDiv);

                    // titleê³¼ subtitle ì»¨í…Œì´ë„ˆ
                    const textContainer = document.createElement('div');
                    textContainer.id = 'cover-text-container';
                    textContainer.className = 'absolute';
                    textContainer.style.cssText = 'display: none; flex-direction: column; align-items: flex-start; gap: 10px; z-index: 10;';
                    
                    const titleImg = document.createElement('img');
                    titleImg.src = './public/interacivefile/FrienderFile/title.png';
                    titleImg.alt = 'Title';
                    titleImg.id = 'cover-title-img';
                    titleImg.style.cssText = 'width: 256px; height: auto; opacity: 0; transform: translateY(20px); transition: opacity 0.3s ease-out, transform 0.3s ease-out;';
                    textContainer.appendChild(titleImg);
                    
                    const subtitleImg = document.createElement('img');
                    subtitleImg.src = './public/interacivefile/FrienderFile/subtitle.png';
                    subtitleImg.alt = 'Subtitle';
                    subtitleImg.id = 'cover-subtitle-img';
                    subtitleImg.style.cssText = 'width: 160px; height: auto; opacity: 0; transform: translateY(20px); transition: opacity 0.3s ease-out, transform 0.3s ease-out;';
                    textContainer.appendChild(subtitleImg);
                    
                    pageContent.appendChild(textContainer);
                } else {
                    const coverBackground = document.createElement('img');
                    coverBackground.src = page.image;
                    coverBackground.alt = 'Cover';
                    coverBackground.className = 'cover-background';
                    pageContent.appendChild(coverBackground);
                }
            } else {
                // ì¼ë°˜ í˜ì´ì§€
                const pageImage = document.createElement('img');
                pageImage.src = page.image;
                pageImage.alt = page.id === 'last' ? 'Last Page' : `Page ${page.id}`;
                pageImage.className = 'page-image';
                pageContent.appendChild(pageImage);

                // ì¸í„°ë™í‹°ë¸Œ ìš”ì†Œë“¤ ì¶”ê°€
                page.interactiveElements.forEach((element, elementIndex) => {
                    const interactiveDiv = createInteractiveElement(element, elementIndex);
                    pageContent.appendChild(interactiveDiv);
                });
            }

            // í˜ì´ì§€ ê·¸ë¦¼ì
            const shadow = document.createElement('div');
            shadow.className = 'page-shadow';
            pageContent.appendChild(shadow);

            pageDiv.appendChild(pageContent);
            return pageDiv;
        }

        // ë°˜ì‘í˜• ì´ë¯¸ì§€ í¬ê¸° ê³„ì‚° í•¨ìˆ˜
        function getResponsiveImageSize(baseSize, isMobile) {
            return isMobile ? baseSize * 0.8 : baseSize;
        }

        // ë°˜ì‘í˜• ì´ë¯¸ì§€ ìœ„ì¹˜ ê³„ì‚° í•¨ìˆ˜
        function getResponsiveImagePosition(baseConfig, isMobile) {
            const scale = isMobile ? 0.9 : 1;
            const result = {
                ...baseConfig,
                width: `${parseFloat(baseConfig.width) * scale}%`,
                maxWidth: `${getResponsiveImageSize(parseInt(baseConfig.maxWidth), isMobile)}px`
            };
            
            // top, left, bottom, right ì†ì„±ë“¤ì„ ê·¸ëŒ€ë¡œ ìœ ì§€
            if (baseConfig.top) result.top = baseConfig.top;
            if (baseConfig.left) result.left = baseConfig.left;
            if (baseConfig.bottom) result.bottom = baseConfig.bottom;
            if (baseConfig.right) result.right = baseConfig.right;
            
            return result;
        }

        // ì¸í„°ë™í‹°ë¸Œ ìš”ì†Œ ìƒì„±
        function createInteractiveElement(element, index) {
            const div = document.createElement('div');
            div.className = 'interactive-image';
            
            // ë°˜ì‘í˜• ìœ„ì¹˜ ê³„ì‚°
            const responsivePosition = getResponsiveImagePosition(element.position, isMobile);
            
            div.style.position = 'absolute';
            
            // top, left, bottom, right ì†ì„±ì„ ê°œë³„ì ìœ¼ë¡œ ì„¤ì •
            if (responsivePosition.top) {
                div.style.top = responsivePosition.top;
            }
            if (responsivePosition.left) {
                div.style.left = responsivePosition.left;
            }
            if (responsivePosition.bottom) {
                div.style.bottom = responsivePosition.bottom;
            }
            if (responsivePosition.right) {
                div.style.right = responsivePosition.right;
            }
            
            div.style.width = responsivePosition.width;
            div.style.maxWidth = responsivePosition.maxWidth;

            if (element.type === 'image') {
                const img = document.createElement('img');
                img.src = element.src;
                img.alt = `Interactive ${index + 1}`;
                img.style.width = '100%';
                img.style.height = '100%';
                img.style.objectFit = 'contain';
                img.style.opacity = '0'; // Reactì™€ ë™ì¼í•˜ê²Œ íˆ¬ëª…ë„ 0ìœ¼ë¡œ ì‹œì‘
                div.appendChild(img);
            } else if (element.type === 'video') {
                const video = document.createElement('video');
                video.src = element.src;
                video.controls = true;
                video.muted = true;
                video.loop = true;
                video.style.width = '100%';
                video.style.height = '100%';
                video.style.objectFit = 'contain';
                video.style.opacity = '1'; // ë¹„ë””ì˜¤ëŠ” ë³´ì´ê²Œ
                div.appendChild(video);
            }

            // í´ë¦­ ì´ë²¤íŠ¸
            div.addEventListener('click', function(e) {
                e.preventDefault();
                e.stopPropagation();
                if (element.clickAction === 'modal') {
                    showModal(element.src, element.type);
                }
            });

            return div;
        }

        // í˜ì´ì§€ ë„˜ê¸°ê¸°
        function flipToPage(pageIndex) {
            const maxPageIndex = Math.ceil((totalPages - 1) / 2);
            if (pageIndex < 0 || pageIndex > maxPageIndex) return;

            console.log('flipToPage called with pageIndex:', pageIndex);

            // ëª¨ë“  í˜ì´ì§€ë¥¼ ì™„ì „íˆ ìˆ¨ê¹€ (ë” ê°•ë ¥í•œ ë°©ë²•)
            for (let i = 0; i < totalPages; i++) {
                const pageElement = document.getElementById(`page-${i}`);
                if (pageElement) {
                    pageElement.style.display = 'none';
                    pageElement.style.visibility = 'hidden';
                    pageElement.style.opacity = '0';
                    pageElement.style.pointerEvents = 'none';
                    pageElement.classList.remove('flipped', 'left-page', 'right-page');
                    pageElement.style.transform = '';
                    pageElement.style.zIndex = '0';
                }
            }

            // í˜„ì¬ í˜ì´ì§€ë¥¼ íƒ€ê²Ÿ í˜ì´ì§€ë¡œ ì„¤ì •
            currentPage = pageIndex;
            updateNavigation();

            // í˜ì´ì§€ í‘œì‹œ/ìˆ¨ê¹€ ì²˜ë¦¬
            for (let i = 0; i < totalPages; i++) {
                const pageElement = document.getElementById(`page-${i}`);
                if (pageElement) {
                    if (pageIndex === 0) {
                        // ì²« í˜ì´ì§€(ì»¤ë²„): ì»¤ë²„ë§Œ ë³´ì´ê²Œ
                        if (i === 0) {
                            pageElement.style.display = 'block';
                            pageElement.style.visibility = 'visible';
                            pageElement.style.opacity = '1';
                            pageElement.style.pointerEvents = 'auto';
                            pageElement.style.zIndex = totalPages;
                            pageElement.style.transform = 'translateX(0)';
                            pageElement.classList.add('left-page');
                            console.log('Showing page-0 (cover)');
                        } else {
                            pageElement.style.display = 'none';
                            pageElement.style.visibility = 'hidden';
                            pageElement.style.opacity = '0';
                            pageElement.style.pointerEvents = 'none';
                        }
                    } else if (pageIndex === Math.ceil((totalPages - 1) / 2)) {
                        // ë§ˆì§€ë§‰ í˜ì´ì§€: ë§ˆì§€ë§‰ í˜ì´ì§€ë§Œ ë³´ì´ê²Œ
                        if (i === totalPages - 1) {
                            pageElement.style.display = 'block';
                            pageElement.style.visibility = 'visible';
                            pageElement.style.opacity = '1';
                            pageElement.style.pointerEvents = 'auto';
                            pageElement.style.zIndex = totalPages;
                            pageElement.style.transform = 'translateX(0)';
                            pageElement.classList.add('left-page');
                            console.log('Showing last page');
                        } else {
                            pageElement.style.display = 'none';
                            pageElement.style.visibility = 'hidden';
                            pageElement.style.opacity = '0';
                            pageElement.style.pointerEvents = 'none';
                        }
                    } else {
                        // ì¤‘ê°„ í˜ì´ì§€ë“¤: pageIndexì— ë”°ë¼ í˜ì´ì§€ ìŒì„ í‘œì‹œ
                        const leftPageIndex = pageIndex * 2 - 1;  // 1, 3, 5, 7...
                        const rightPageIndex = leftPageIndex + 1;  // 2, 4, 6, 8...
                        
                                                 if (i === leftPageIndex) {  // ë°°ì—´ ì¸ë±ìŠ¤ëŠ” 1ë¶€í„° ì‹œì‘
                             // ì™¼ìª½ í˜ì´ì§€
                             pageElement.style.display = 'block';
                             pageElement.style.visibility = 'visible';
                             pageElement.style.opacity = '1';
                             pageElement.style.pointerEvents = 'auto';
                             pageElement.style.zIndex = totalPages;
                             pageElement.style.transform = 'translateX(-50%)';
                             pageElement.classList.add('left-page');
                             console.log('Showing left page:', leftPageIndex);
                         } else if (i === rightPageIndex && rightPageIndex < totalPages - 1) {
                             // ì˜¤ë¥¸ìª½ í˜ì´ì§€ (ë§ˆì§€ë§‰ í˜ì´ì§€ ì œì™¸)
                             pageElement.style.display = 'block';
                             pageElement.style.visibility = 'visible';
                             pageElement.style.opacity = '1';
                             pageElement.style.pointerEvents = 'auto';
                             pageElement.style.zIndex = totalPages - 1;
                             pageElement.style.transform = 'translateX(50%)';
                             pageElement.classList.add('right-page');
                             console.log('Showing right page:', rightPageIndex);
                        } else {
                            // ë‚˜ë¨¸ì§€ í˜ì´ì§€ëŠ” ìˆ¨ê¸°ê¸°
                            pageElement.style.display = 'none';
                            pageElement.style.visibility = 'hidden';
                            pageElement.style.opacity = '0';
                            pageElement.style.pointerEvents = 'none';
                        }
                    }
                }
            }

            // í‘œì§€ í˜ì´ì§€ ì• ë‹ˆë©”ì´ì…˜
            if (pageIndex === 0) {
                startCoverAnimation();
            }
        }

        // ë‹¤ìŒ í˜ì´ì§€
        function nextPage() {
            const maxPageIndex = Math.ceil((totalPages - 1) / 2);
            if (currentPage < maxPageIndex) {
                flipToPage(currentPage + 1);
            }
        }

        // ì´ì „ í˜ì´ì§€
        function previousPage() {
            if (currentPage > 0) {
                flipToPage(currentPage - 1);
            }
        }

        // ë„¤ë¹„ê²Œì´ì…˜ ì—…ë°ì´íŠ¸
        function updateNavigation() {
            const prevBtn = document.getElementById('prevBtn');
            const nextBtn = document.getElementById('nextBtn');
            const pageInfo = document.getElementById('pageInfo');

            const maxPageIndex = Math.ceil((totalPages - 1) / 2);  // ë§ˆì§€ë§‰ pageIndex

            prevBtn.disabled = currentPage === 0;
            nextBtn.disabled = currentPage === maxPageIndex;
            pageInfo.textContent = `${currentPage + 1} / ${maxPageIndex + 1}`;
        }

        // í‘œì§€ ì• ë‹ˆë©”ì´ì…˜ ë³€ìˆ˜ë“¤
        let animationRef = null;
        let isMainImageAnimating = false;
        let mainImageSize = 1;
        let mainImageRotation = 0;
        let mainImageOpacity = 0;
        let titleOpacity = 0;
        let subtitleOpacity = 0;
        let backgroundScale = 1.2;
        let backgroundBlur = 0;

        // í™”ë ¤í•œ í‘œì§€ ì• ë‹ˆë©”ì´ì…˜ í•¨ìˆ˜ (Reactì™€ ë™ì¼)
        function animateCover(duration) {
            const startTime = performance.now();
            
            const animate = (currentTime) => {
                const elapsed = currentTime - startTime;
                const progress = Math.min(elapsed / duration, 1);
                
                // ë°°ê²½ ì• ë‹ˆë©”ì´ì…˜ (0-30%)
                if (progress <= 0.3) {
                    const bgProgress = progress / 0.3;
                    backgroundScale = 1.2 - (0.2 * bgProgress);
                    backgroundBlur = 5 * bgProgress;
                    updateBackgroundAnimation();
                }
                
                // ë©”ì¸ ì´ë¯¸ì§€ ë“±ì¥ ì• ë‹ˆë©”ì´ì…˜ (20-50%)
                if (progress >= 0.2 && progress <= 0.5) {
                    const imgProgress = (progress - 0.2) / 0.3;
                    mainImageOpacity = imgProgress;
                    mainImageRotation = 360 * imgProgress;
                    mainImageSize = 1 + (319 * imgProgress);
                    updateMainImageAnimation();
                }
                
                // ë©”ì¸ ì´ë¯¸ì§€ í¬ê¸° ì¡°ì • ë° íšŒì „ ì •ë¦¬ (50-80%)
                if (progress >= 0.5 && progress <= 0.8) {
                    const sizeProgress = (progress - 0.5) / 0.3;
                    mainImageSize = 320 + (0 * sizeProgress); // í¬ê¸° ìœ ì§€
                    mainImageRotation = 360 - (360 * sizeProgress); // 360ë„ì—ì„œ 0ë„ë¡œ íšŒì „ ì •ë¦¬
                    updateMainImageAnimation();
                }
                
                // íƒ€ì´í‹€ê³¼ ì„œë¸Œíƒ€ì´í‹€ ë“±ì¥ (70-100%)
                if (progress >= 0.7 && progress <= 1) {
                    const textProgress = (progress - 0.7) / 0.3;
                    titleOpacity = textProgress;
                    subtitleOpacity = textProgress;
                    updateTextAnimation();
                }
                
                // ì• ë‹ˆë©”ì´ì…˜ ì™„ë£Œ ì‹œ íšŒì „ì„ 0ë„ë¡œ ì§ì ‘ ì„¤ì •
                if (progress >= 1) {
                    mainImageRotation = 0;
                    updateMainImageAnimation();
                }
                
                if (progress < 1) {
                    animationRef = requestAnimationFrame(animate);
                }
            };
            
            animationRef = requestAnimationFrame(animate);
        }

        // ë°°ê²½ ì• ë‹ˆë©”ì´ì…˜ ì—…ë°ì´íŠ¸
        function updateBackgroundAnimation() {
            const backgroundImg = document.querySelector('.cover-background');
            if (backgroundImg) {
                backgroundImg.style.transform = `scale(${backgroundScale})`;
                backgroundImg.style.filter = `blur(${backgroundBlur}px)`;
            }
        }

        // ë©”ì¸ ì´ë¯¸ì§€ ì• ë‹ˆë©”ì´ì…˜ ì—…ë°ì´íŠ¸
        function updateMainImageAnimation() {
            const mainImage = document.getElementById('cover-main-image');
            const textContainer = document.getElementById('cover-text-container');
            
            if (mainImage) {
                mainImage.style.width = `${mainImageSize}px`;
                mainImage.style.height = `${mainImageSize}px`;
                mainImage.style.opacity = mainImageOpacity;
                mainImage.style.transform = `rotate(${mainImageRotation}deg)`;
            }
            
                         // ë©”ì¸ ì´ë¯¸ì§€ê°€ ì¶©ë¶„íˆ ì»¤ì§€ë©´ í…ìŠ¤íŠ¸ ì»¨í…Œì´ë„ˆ í‘œì‹œ (Reactì™€ ë™ì¼í•œ ì¡°ê±´)
             if (textContainer && isMainImageAnimating && mainImageSize > 50) {
                 textContainer.style.display = 'flex';
                 // main ì´ë¯¸ì§€ ì¤‘ì•™ì— ì˜¤ë²„ë ˆì´ë˜ë„ë¡ ìœ„ì¹˜ ì¡°ì •
                 const containerWidth = mainImageSize * 0.8; // title ì´ë¯¸ì§€ í¬ê¸°
                 const containerHeight = mainImageSize * 0.5; // subtitle ì´ë¯¸ì§€ í¬ê¸°
                 
                 // main ì´ë¯¸ì§€ ì¤‘ì•™ì— í…ìŠ¤íŠ¸ ì»¨í…Œì´ë„ˆ ë°°ì¹˜
                 textContainer.style.left = `calc(50% - ${containerWidth / 2}px)`;
                 textContainer.style.top = `calc(50% - ${containerHeight / 2}px)`;
             }
        }

        // í…ìŠ¤íŠ¸ ì• ë‹ˆë©”ì´ì…˜ ì—…ë°ì´íŠ¸
        function updateTextAnimation() {
            const titleImg = document.getElementById('cover-title-img');
            const subtitleImg = document.getElementById('cover-subtitle-img');
            
            if (titleImg) {
                titleImg.style.width = `${mainImageSize * 0.8}px`; // main ì´ë¯¸ì§€ë³´ë‹¤ 20% ì‘ê²Œ
                titleImg.style.height = 'auto';
                titleImg.style.opacity = titleOpacity;
                titleImg.style.transform = `translateY(${20 - (titleOpacity * 20)}px)`;
            }
            
            if (subtitleImg) {
                subtitleImg.style.width = `${mainImageSize * 0.5}px`; // main ì´ë¯¸ì§€ì˜ 50% í¬ê¸°
                subtitleImg.style.height = 'auto';
                subtitleImg.style.opacity = subtitleOpacity;
                subtitleImg.style.transform = `translateY(${20 - (subtitleOpacity * 20)}px)`;
            }
        }

        // í‘œì§€ ì• ë‹ˆë©”ì´ì…˜ ì‹œì‘
        function startCoverAnimation() {
            // ì• ë‹ˆë©”ì´ì…˜ ì´ˆê¸°í™”
            isMainImageAnimating = false;
            mainImageSize = 1;
            mainImageRotation = 0;
            mainImageOpacity = 0;
            titleOpacity = 0;
            subtitleOpacity = 0;
            backgroundScale = 1.2;
            backgroundBlur = 0;

            // Friender í”„ë¡œì íŠ¸ì¼ ë•Œë§Œ ì• ë‹ˆë©”ì´ì…˜ ì‹¤í–‰
            if (bookData.name === 'Friender í”„ë¡œì íŠ¸') {
                // 1ì´ˆ í›„ì— í™”ë ¤í•œ ì• ë‹ˆë©”ì´ì…˜ ì‹œì‘
                setTimeout(() => {
                    isMainImageAnimating = true;
                    // í™”ë ¤í•œ ì• ë‹ˆë©”ì´ì…˜ ì‹œì‘ (3ì´ˆ)
                    animateCover(3000);
                }, 1000);
            }
        }

        // ëª¨ë‹¬ í‘œì‹œ
        function showModal(src, type) {
            const modal = document.getElementById('modal');
            const modalContent = document.getElementById('modalContent');

            // ê¸°ì¡´ ë‚´ìš© ì œê±°
            modalContent.innerHTML = '';

            // í™˜ê²½ ê´€ë ¨ ì´ë¯¸ì§€ì¸ì§€ í™•ì¸ (environ-1.png ~ environ-6.png)
            const isEnvironImage = src.includes('environ-');
            let actualSrc = src;
            let actualType = type;

            if (isEnvironImage && currentBook === 'friender') {
                // í™˜ê²½ ì´ë¯¸ì§€ ë²ˆí˜¸ ì¶”ì¶œ
                const environNumber = src.match(/environ-(\d+)\.png/)[1];
                // í•´ë‹¹í•˜ëŠ” GIFë¡œ ë³€ê²½
                actualSrc = frienderGifMapping[environNumber];
                actualType = 'image'; // GIFëŠ” ì´ë¯¸ì§€ë¡œ ì²˜ë¦¬
            }

            if (actualType === 'video') {
                const video = document.createElement('video');
                video.src = actualSrc;
                video.controls = true;
                video.autoplay = true;
                video.className = 'modal-media';
                video.textContent = 'Your browser does not support the video tag.';
                modalContent.appendChild(video);
            } else {
                const img = document.createElement('img');
                img.src = actualSrc;
                img.alt = 'Interactive Content';
                img.className = 'modal-media';
                modalContent.appendChild(img);
            }

            modal.style.display = 'block';
        }

        // ëª¨ë‹¬ ë‹«ê¸°
        function closeModal() {
            const modal = document.getElementById('modal');
            modal.style.display = 'none';
        }

        // ì±… ì „í™˜
        function switchBook(bookType) {
            // ë²„íŠ¼ ìƒíƒœ ì—…ë°ì´íŠ¸
            document.querySelectorAll('.book-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // í˜„ì¬ í´ë¦­ëœ ë²„íŠ¼ì„ í™œì„±í™”
            if (bookType === 'friender') {
                document.getElementById('friender-btn').classList.add('active');
            } else {
                document.getElementById('vq-btn').classList.add('active');
            }

            // ì±… ë°ì´í„° ë³€ê²½
            if (bookType === 'friender') {
                bookData = frienderData;
            } else {
                bookData = vqData;
            }

            totalPages = bookData.totalPages;
            currentPage = 0;
            renderBook();
            updateNavigation();
            startCoverAnimation();
        }

        // PDF í”„ë¦°íŠ¸
        function printPDF() {
            const pdfUrl = bookData.pdfPath;
            const printWindow = window.open(pdfUrl, '_blank');
            
            if (printWindow) {
                printWindow.onload = () => {
                    printWindow.print();
                };
            }
        }

        // PDF ë‹¤ìš´ë¡œë“œ
        function downloadPDF() {
            const link = document.createElement('a');
            link.href = bookData.pdfPath;
            link.download = bookData.name + '.pdf';
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }

        // ì• ë‹ˆë©”ì´ì…˜ ì •ë¦¬ í•¨ìˆ˜
        function cleanupAnimation() {
            if (animationRef) {
                cancelAnimationFrame(animationRef);
                animationRef = null;
            }
        }

        // ì´ˆê¸°í™” ì‹¤í–‰
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>
